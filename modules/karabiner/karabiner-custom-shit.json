{
	"title": "COOL keys, vim arrows, and exit safeguards. (COOL == COmmand+Option+contrOL)(⌘⌥⌃) ",
	"rules": [
		{
			"description": "CAPS_LOCK -> tap==ESC and hold==COOL (all right mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "caps_lock",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "right_command",
							"modifiers": [
								"right_control",
								"right_option"
							]
						}
					],
					"to_if_alone": [
						{
							"key_code": "escape"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "CAPS_LOCK -> tap==ESC and hold==COOL (all left mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "caps_lock",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "left_command",
							"modifiers": [
								"left_control",
								"left_option"
							]
						}
					],
					"to_if_alone": [
						{
							"key_code": "escape"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "ESC -> tap==ESC and hold==COOL (all right mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "escape",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "right_command",
							"modifiers": [
								"right_control",
								"right_option"
							]
						}
					],
					"to_if_alone": [
						{
							"key_code": "escape"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "ESC -> tap==ESC and hold==COOL (all left mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "escape",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "left_command",
							"modifiers": [
								"left_control",
								"left_option"
							]
						}
					],
					"to_if_alone": [
						{
							"key_code": "escape"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "Toggle CAPS_LOCK with LEFT_SHIFT + RIGHT_SHIFT",
			"manipulators": [
				{
					"from": {
						"key_code": "left_shift",
						"modifiers": {
							"mandatory": [
								"right_shift"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"key_code": "caps_lock"
						}
					],
					"to_if_alone": [
						{
							"key_code": "left_shift"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "right_shift",
						"modifiers": {
							"mandatory": [
								"left_shift"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"key_code": "caps_lock"
						}
					],
					"to_if_alone": [
						{
							"key_code": "right_shift"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "COOL + h/j/k/l == Arrow Keys (any mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "k",
						"modifiers": {
							"mandatory": [
								"command",
								"control",
								"option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "up_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "h",
						"modifiers": {
							"mandatory": [
								"command",
								"control",
								"option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "left_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "j",
						"modifiers": {
							"mandatory": [
								"command",
								"control",
								"option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "down_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "l",
						"modifiers": {
							"mandatory": [
								"command",
								"control",
								"option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "right_arrow"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "COOL + h/j/k/l == Arrow Keys (right mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "k",
						"modifiers": {
							"mandatory": [
								"right_command",
								"right_control",
								"right_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "up_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "h",
						"modifiers": {
							"mandatory": [
								"right_command",
								"right_control",
								"right_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "left_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "j",
						"modifiers": {
							"mandatory": [
								"right_command",
								"right_control",
								"right_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "down_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "l",
						"modifiers": {
							"mandatory": [
								"right_command",
								"right_control",
								"right_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "right_arrow"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "COOL + h/j/k/l == Arrow Keys (left mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "k",
						"modifiers": {
							"mandatory": [
								"left_command",
								"left_control",
								"left_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "up_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "h",
						"modifiers": {
							"mandatory": [
								"left_command",
								"left_control",
								"left_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "left_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "j",
						"modifiers": {
							"mandatory": [
								"left_command",
								"left_control",
								"left_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "down_arrow"
						}
					],
					"type": "basic"
				},
				{
					"from": {
						"key_code": "l",
						"modifiers": {
							"mandatory": [
								"left_command",
								"left_control",
								"left_option"
							],
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "right_arrow"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "Right Option Key -> COOL Key (all right mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "right_option",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "right_command",
							"modifiers": [
								"right_control",
								"right_option"
							]
						}
					],
					"to_if_alone": [
						{
							"key_code": "escape"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "Right Option Key -> COOL Key (all left mods)",
			"manipulators": [
				{
					"from": {
						"key_code": "left_option",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "left_command",
							"modifiers": [
								"left_control",
								"left_option"
							]
						}
					],
					"to_if_alone": [
						{
							"key_code": "escape"
						}
					],
					"type": "basic"
				}
			]
		},
		{
			"description": "disable sysdiagnose hotkeys (hyper+[,./])",
			"manipulators": [
				{
					"description": "Avoid starting sysdiagnose with the built-in macOS shortcut cmd+shift+option+ctrl+,",
					"from": {
						"key_code": "comma",
						"modifiers": {
							"mandatory": [
								"command",
								"shift",
								"option",
								"control"
							]
						}
					},
					"type": "basic"
				},
				{
					"description": "Avoid starting sysdiagnose with the built-in macOS shortcut cmd+shift+option+ctrl+.",
					"from": {
						"key_code": "period",
						"modifiers": {
							"mandatory": [
								"command",
								"shift",
								"option",
								"control"
							]
						}
					},
					"type": "basic"
				},
				{
					"from": {
						"description": "Avoid starting sysdiagnose with the built-in macOS shortcut cmd+shift+option+ctrl+/",
						"key_code": "slash",
						"modifiers": {
							"mandatory": [
								"command",
								"shift",
								"option",
								"control"
							]
						}
					},
					"type": "basic"
				}
			]
		},
		{
			"description": "Close Window by pressing command-w twice",
			"manipulators": [
				{
					"type": "basic",
					"conditions": [
						{
							"type": "variable_if",
							"name": "command-w",
							"value": 1
						}
					],
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"key_code": "w",
							"modifiers": "left_command"
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"set_variable": {
								"name": "command-w",
								"value": 1
							}
						}
					],
					"to_delayed_action": {
						"to_if_invoked": [
							{
								"set_variable": {
									"name": "command-w",
									"value": 0
								}
							}
						],
						"to_if_canceled": [
							{
								"set_variable": {
									"name": "command-w",
									"value": 0
								}
							}
						]
					}
				}
			]
		},
		{
			"description": "Quit application by pressing command-q twice",
			"manipulators": [
				{
					"type": "basic",
					"conditions": [
						{
							"type": "variable_if",
							"name": "command-q",
							"value": 1
						}
					],
					"from": {
						"key_code": "q",
						"modifiers": {
							"mandatory": [
								"left_command"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"key_code": "q",
							"modifiers": "left_command"
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "q",
						"modifiers": {
							"mandatory": [
								"left_command"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"set_variable": {
								"name": "command-q",
								"value": 1
							}
						}
					],
					"to_delayed_action": {
						"to_if_invoked": [
							{
								"set_variable": {
									"name": "command-q",
									"value": 0
								}
							}
						],
						"to_if_canceled": [
							{
								"set_variable": {
									"name": "command-q",
									"value": 0
								}
							}
						]
					}
				}
			]
		},
		{
			"description": "Close window by holding command-w",
			"manipulators": [
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"left_command"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to_if_held_down": [
						{
							"key_code": "w",
							"modifiers": [
								"left_command"
							],
							"repeat": false
						}
					]
				}
			]
		},
		{
			"description": "Quit application by holding command-q",
			"manipulators": [
				{
					"type": "basic",
					"from": {
						"key_code": "q",
						"modifiers": {
							"mandatory": [
								"left_command"
							],
							"optional": [
								"caps_lock"
							]
						}
					},
					"to_if_held_down": [
						{
							"key_code": "q",
							"modifiers": [
								"left_command"
							],
							"repeat": false
						}
					]
				}
			]
		},
		{
			"description": "SPACE -> tap=SPACE, HOLD=h/j/k/l arrow keys",
			"manipulators": [
				{
					"type": "basic",
					"from": {
						"key_code": "h",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "left_arrow",
							"modifiers": []
						}
					],
					"conditions": [
						{
							"type": "variable_if",
							"name": "ergo_fly_keys_spacebar",
							"value": 1
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"simultaneous": [
							{
								"key_code": "spacebar"
							},
							{
								"key_code": "h"
							}
						],
						"simultaneous_options": {
							"key_down_order": "strict",
							"key_up_order": "strict_inverse",
							"detect_key_down_uninterruptedly": true,
							"to_after_key_up": [
								{
									"set_variable": {
										"name": "ergo_fly_keys_spacebar",
										"value": 0
									}
								}
							]
						},
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"set_variable": {
								"name": "ergo_fly_keys_spacebar",
								"value": 1
							}
						},
						{
							"set_variable": {
								"name": "DEBUG simultaneous",
								"value": 1
							}
						},
						{
							"key_code": "left_arrow",
							"modifiers": []
						}
					],
					"parameters": {
						"basic.simultaneous_threshold_milliseconds": 300
					}
				},
				{
					"type": "basic",
					"from": {
						"key_code": "j",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "down_arrow",
							"modifiers": []
						}
					],
					"conditions": [
						{
							"type": "variable_if",
							"name": "ergo_fly_keys_spacebar",
							"value": 1
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"simultaneous": [
							{
								"key_code": "spacebar"
							},
							{
								"key_code": "j"
							}
						],
						"simultaneous_options": {
							"key_down_order": "strict",
							"key_up_order": "strict_inverse",
							"detect_key_down_uninterruptedly": true,
							"to_after_key_up": [
								{
									"set_variable": {
										"name": "ergo_fly_keys_spacebar",
										"value": 0
									}
								}
							]
						},
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"set_variable": {
								"name": "ergo_fly_keys_spacebar",
								"value": 1
							}
						},
						{
							"set_variable": {
								"name": "DEBUG simultaneous",
								"value": 1
							}
						},
						{
							"key_code": "down_arrow",
							"modifiers": []
						}
					],
					"parameters": {
						"basic.simultaneous_threshold_milliseconds": 300
					}
				},
				{
					"type": "basic",
					"from": {
						"key_code": "k",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "up_arrow",
							"modifiers": []
						}
					],
					"conditions": [
						{
							"type": "variable_if",
							"name": "ergo_fly_keys_spacebar",
							"value": 1
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"simultaneous": [
							{
								"key_code": "spacebar"
							},
							{
								"key_code": "k"
							}
						],
						"simultaneous_options": {
							"key_down_order": "strict",
							"key_up_order": "strict_inverse",
							"detect_key_down_uninterruptedly": true,
							"to_after_key_up": [
								{
									"set_variable": {
										"name": "ergo_fly_keys_spacebar",
										"value": 0
									}
								}
							]
						},
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"set_variable": {
								"name": "ergo_fly_keys_spacebar",
								"value": 1
							}
						},
						{
							"set_variable": {
								"name": "DEBUG simultaneous",
								"value": 1
							}
						},
						{
							"key_code": "up_arrow",
							"modifiers": []
						}
					],
					"parameters": {
						"basic.simultaneous_threshold_milliseconds": 300
					}
				},
				{
					"type": "basic",
					"from": {
						"key_code": "l",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"key_code": "right_arrow",
							"modifiers": []
						}
					],
					"conditions": [
						{
							"type": "variable_if",
							"name": "ergo_fly_keys_spacebar",
							"value": 1
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"simultaneous": [
							{
								"key_code": "spacebar"
							},
							{
								"key_code": "l"
							}
						],
						"simultaneous_options": {
							"key_down_order": "strict",
							"key_up_order": "strict_inverse",
							"detect_key_down_uninterruptedly": true,
							"to_after_key_up": [
								{
									"set_variable": {
										"name": "ergo_fly_keys_spacebar",
										"value": 0
									}
								}
							]
						},
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"set_variable": {
								"name": "ergo_fly_keys_spacebar",
								"value": 1
							}
						},
						{
							"set_variable": {
								"name": "DEBUG simultaneous",
								"value": 1
							}
						},
						{
							"key_code": "right_arrow",
							"modifiers": []
						}
					],
					"parameters": {
						"basic.simultaneous_threshold_milliseconds": 300
					}
				},
				{
					"type": "basic",
					"from": {
						"key_code": "spacebar",
						"modifiers": {
							"optional": [
								"any"
							]
						}
					},
					"to": [
						{
							"set_variable": {
								"name": "DEBUG simultaneous",
								"value": 0
							}
						},
						{
							"set_variable": {
								"name": "DEBUG trigger alone",
								"value": 0
							}
						},
						{
							"set_variable": {
								"name": "DEBUG trigger held down",
								"value": 0
							}
						},
						{
							"set_variable": {
								"name": "DEBUG trigger key up",
								"value": 0
							}
						},
						{
							"set_variable": {
								"name": "DEBUG trigger delay invoked",
								"value": 0
							}
						},
						{
							"set_variable": {
								"name": "DEBUG trigger delay canceled",
								"value": 0
							}
						},
						{
							"set_variable": {
								"name": "DEBUG halt",
								"value": 0
							}
						}
					],
					"to_if_alone": [
						{
							"set_variable": {
								"name": "DEBUG trigger alone",
								"value": 1
							}
						},
						{
							"set_variable": {
								"name": "ergo_fly_keys_spacebar",
								"value": 0
							}
						},
						{
							"set_variable": {
								"name": "DEBUG halt",
								"value": 1
							}
						},
						{
							"key_code": "spacebar",
							"halt": true
						}
					],
					"to_if_held_down": [
						{
							"set_variable": {
								"name": "DEBUG trigger held down",
								"value": 1
							}
						},
						{
							"set_variable": {
								"name": "ergo_fly_keys_spacebar",
								"value": 1
							}
						}
					],
					"to_after_key_up": [
						{
							"set_variable": {
								"name": "DEBUG trigger key up",
								"value": 1
							}
						},
						{
							"set_variable": {
								"name": "ergo_fly_keys_spacebar",
								"value": 0
							}
						},
						{
							"key_code": "vk_none"
						}
					],
					"to_delayed_action": {
						"to_if_invoked": [
							{
								"set_variable": {
									"name": "DEBUG trigger delay invoked",
									"value": 1
								}
							}
						],
						"to_if_canceled": [
							{
								"set_variable": {
									"name": "DEBUG trigger delay canceled",
									"value": 1
								}
							},
							{
								"set_variable": {
									"name": "ergo_fly_keys_spacebar",
									"value": 0
								}
							},
							{
								"set_variable": {
									"name": "DEBUG halt",
									"value": 1
								}
							},
							{
								"key_code": "spacebar"
							}
						]
					},
					"parameters": {
						"basic.to_if_alone_timeout_milliseconds": 300,
						"basic.to_delayed_action_delay_milliseconds": 0,
						"basic.to_if_held_down_threshold_milliseconds": 0
					}
				}
			]
		},
		{
			"description": "Close Tab or Window by pressing cmd+shift+w instead of cmd+w, default behavior with caps_lock",
			"manipulators": [
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command"
							]
						}
					},
					"to": [
						{
							"key_code": "left_command",
							"modifiers": "left_command"
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command",
								"shift"
							]
						}
					},
					"to": [
						{
							"key_code": "w",
							"modifiers": "right_command"
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command",
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"key_code": "w",
							"modifiers": "right_command"
						}
					]
				}
			]
		},
		{
			"description": "Close Tab or Window by pressing ctrl+w instead of cmd+w, default behavior with caps_lock",
			"manipulators": [
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command"
							]
						}
					},
					"to": [
						{
							"key_code": "left_command",
							"modifiers": "left_command"
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"lctrl"
							]
						}
					},
					"to": [
						{
							"key_code": "w",
							"modifiers": "right_command"
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command",
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"key_code": "w",
							"modifiers": "right_command"
						}
					]
				}
			]
		},
		{
			"description": "Close Window by pressing cmd+shift+q instead of cmd+shift+w, default behavior with caps_lock",
			"manipulators": [
				{
					"type": "basic",
					"from": {
						"key_code": "w",
						"modifiers": {
							"mandatory": [
								"command",
								"shift"
							]
						}
					},
					"to": [
						{
							"key_code": "left_command",
							"modifiers": "left_command"
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "q",
						"modifiers": {
							"mandatory": [
								"command",
								"shift"
							]
						}
					},
					"to": [
						{
							"key_code": "w",
							"modifiers": [
								"right_command",
								"shift"
							]
						}
					]
				},
				{
					"type": "basic",
					"from": {
						"key_code": "q",
						"modifiers": {
							"mandatory": [
								"command",
								"shift",
								"caps_lock"
							]
						}
					},
					"to": [
						{
							"key_code": "q",
							"modifiers": [
								"right_command",
								"shift"
							]
						}
					]
				}
			]
		}
	]
}
